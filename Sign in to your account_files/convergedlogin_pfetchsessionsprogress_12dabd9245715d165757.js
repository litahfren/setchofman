/*!
 * ------------------------------------------- START OF THIRD PARTY NOTICE -----------------------------------------
 * 
 * This file is based on or incorporates material from the projects listed below (Third Party IP). The original copyright notice and the license under which Microsoft received such Third Party IP, are set forth below. Such licenses and notices are provided for informational purposes only. Microsoft licenses the Third Party IP to you under the licensing terms for the Microsoft product. Microsoft reserves all other rights not expressly granted under this agreement, whether by implication, estoppel or otherwise.
 * 
 *   json2.js (2016-05-01)
 *   https://github.com/douglascrockford/JSON-js
 *   License: Public Domain
 * 
 * Provided for Informational Purposes Only
 * 
 * ----------------------------------------------- END OF THIRD PARTY NOTICE ------------------------------------------
 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{456:function(e,n,s){var t=s(2),o=s(1),r=s(0),i=s(4),a=window,c=r.CredentialType,l=o.QueryString,u=r.PaginatedState,d=o.Helper,p=r.IfExistsResult,m=r.SessionPullFlags;function S(e){var n=this,s=d.isEdge(),t=e.serverData,o=e.nonInteractiveAuthRequest,r=e.username,a=e.displayName,S=e.unsafe_desktopSsoDomainToUse,f=e.preferredCredential,g=!!e.isPushNotification,h=e.sessionPullType,v=e.isInitialView,w=t.arrSessions||[],k=t.canary,R=t.desktopSsoConfig,y=t.sCtx,T=t.urlLogin,C=t.oGetCredTypeResult,x=t.fShowTilesAfterSessionPull,D=t.sPrefillUsername;function _(){var e;s&&R&&R.isEdgeAllowed?(e={canary:k,client_id:l.extract("client_id"),ctx:y,dsso_edge_username:r,edge_attempted:!0},n.onRedirect(T,e)):D&&C?x?n.onSwitchView(u.Tiles,!0):v?n.onSwitchView(u.Username,!0):n.onExecuteGctResult():n.onSwitchView(function(){if(!f)return w.length?u.Tiles:u.Username;return function(){var e=u.Password;switch(f){case c.Password:e=u.Password;break;case c.Fido:e=u.Fido;break;case c.RemoteNGC:e=v&&g?u.ConfirmSend:u.RemoteNGC;break;case c.OneTimeCode:case c.PublicIdentifierCode:e=u.ConfirmSend;break;case c.Federation:case c.CloudFederation:e=u.IdpRedirect}return e}()}(),!0)}n.onUpdateUserTiles=i.create(),n.onExecuteGctResult=i.create(),n.onSubmitReady=i.create(),n.onRedirect=i.create(),n.onSwitchView=i.create(),n.onIncrementAsyncTileRequestCount=i.create(),n.onDecrementAsyncTileRequestCount=i.create(),n.isNonInteractiveAuthRequest=o,n.sessionPullType=h,n.username=r,n.displayName=a,n.unsafe_domainName=S,n.saveSharedData=function(e){h&m.Dsso&&(e.desktopSsoExecuted=!0)},n.getState=function(){return null},n.restoreState=function(){},n.cancelLink_onClick=function(){_()},n.fetchSessionsProgress_onHandleDssoSuccess=function(){n.onSubmitReady()},n.fetchSessionsProgress_onRedirect=function(e,s){n.onRedirect(e,s)},n.fetchSessionsProgress_onDesktopSsoFallbackView=function(){_()},n.fetchSessionsProgress_onUpdateUserTiles=function(e,s){C&&C.IfExistsResult===p.ExistsBothIDPs?n.onSwitchView(u.IdpDisambiguation,!0):D&&C?x?n.onSwitchView(u.Tiles,!0):n.onExecuteGctResult():w.length>0?n.onSwitchView(u.Tiles,!0):n.onSwitchView(u.Username,!0),n.onUpdateUserTiles(e,s)},n.fetchSessionsProgress_onExecuteGctResult=function(){v?w.length>0?n.onSwitchView(u.Tiles,!0):n.onSwitchView(u.Username,!0):n.onExecuteGctResult()},n.fetchSessionsProgress_onIncrementAsyncTileRequestCount=function(){n.onIncrementAsyncTileRequestCount()},n.fetchSessionsProgress_onDecrementAsyncTileRequestCount=function(){n.onDecrementAsyncTileRequestCount()}}t.components.register("fetch-sessions-progress-view",{viewModel:S,template:s(633),synchronous:!a.ServerData.iMaxStackForKnockoutAsyncComponents||o.Helper.isStackSizeGreaterThan(a.ServerData.iMaxStackForKnockoutAsyncComponents),enableExtensions:!0}),e.exports=S},633:function(e,n,s){e.exports="\x3c!-- "+(s(634),s(18),' --\x3e\n\n<div id="loginHeader" class="row" role="heading" aria-level="1" data-bind="text: str[\'DSSO_STR_AuthenticatingMessage\'], externalCss: { \'title\': true }"></div>\n\n<div class="row progress-container">\n    <div class="progress" role="progressbar" data-bind="component: \'marching-ants-control\', ariaLabel: str[\'WF_STR_ProgressText\']"></div>\n</div>\n\n\x3c!-- ko if: (sessionPullType & ')+s(0).SessionPullFlags.Dsso+') != 0 --\x3e\n<a id="desktopSsoCancel" href="#" data-bind="\n    text: str[\'CT_HRD_STR_Redirect_Cancel\'],\n    ariaDescribedBy: \'loginHeader\',\n    click: cancelLink_onClick,\n    hasFocus: true"></a>\n\x3c!-- /ko --\x3e\n\n<div data-bind="component: { name: \'fetch-sessions-control\',\n    params: {\n        serverData: svr,\n        sessionPullType: sessionPullType,\n        unsafe_desktopSsoDomainToUse: unsafe_domainName,\n        username: username,\n        displayName: displayName },\n    event: {\n        updateUserTiles: fetchSessionsProgress_onUpdateUserTiles,\n        executeGctResult: fetchSessionsProgress_onExecuteGctResult,\n        handleDssoSuccess: fetchSessionsProgress_onHandleDssoSuccess,\n        desktopSsoFallbackView: fetchSessionsProgress_onDesktopSsoFallbackView,\n        incrementAsyncTileRequestCount: fetchSessionsProgress_onIncrementAsyncTileRequestCount,\n        decrementAsyncTileRequestCount: fetchSessionsProgress_onDecrementAsyncTileRequestCount,\n        redirect: fetchSessionsProgress_onRedirect } }">\n</div>\n'},634:function(e,n,s){var t=s(2),o=s(1),r=s(4),i=s(10),a=s(3),c=s(5),l=s(45),u=s(11),d=s(0),p=s(6),m=window,S=o.QueryString,f=a.Object,g=a.DateTime,h=p.SessionIdp,v=a.String,w=o.Helper,k=d.PaginatedState;function R(e){var n,s=this,o=e.serverData,a=e.nonInteractiveAuthRequest,d=e.username,p=e.displayName,R=e.unsafe_desktopSsoDomainToUse,y=e.sessionPullType,T=null,C=0,x=0,D=[],_=[],P=null,F=null,b=null,I=null,E=null,U=null,A=null,M="",q=null,N=!1,L=o.canary,H=o.urlGoToAADError,O=o.urlLogin,V=o.urlReportStaticMeControlTelemetry,G=o.oUrlOtherIdpPostParams,j=o.sPrefillUsername,B=o.sHashedLoginHint,W=o.fSsoFeasible,K=o.fProvideV2SsoImprovements,J=o.urlMsaStaticMeControl,Q=o.sTransientDataMsaMeControl,z=o.sPersistentDataMsaMeControl,X=o.fPassMeControlTelemetry,Y=o.arrSessions,Z=o.desktopSsoConfig,$=o.sCtx,ee=o.urlAppError,ne=o.oAppRedirectErrorPostParams,se=o.sPOST_PaginatedLoginState;function te(){return!!P&&(!P.isSignedIn&&!P.isWindowsSso)}function oe(e){var n=J;if(e&&v.doOriginsMatch(n,e.origin)&&e.data){var o=null,r=null,i=null;try{r=(o=JSON.parse(e.data)).userList,i=o.tilesState}catch(a){return}r&&"msaMeCached"===o.messageType&&(!function(e,n){if(e=e||[],n=n||[],D=t.utils.arrayFilter(n,(function(e){return(e.isSignedIn||e.isWindowsSso)&&!e.isMeControlSession&&e.id})),C=D.length,_=t.utils.arrayFilter(e,(function(e){return e.isSignedIn||e.isWindowsSso})),x=_.length,B&&j){var s=t.utils.arrayFirst(n,(function(e){return e.matchesLoginHint}));s&&(P=s,(s.isSignedIn||s.isWindowsSso)&&!s.isMeControlSession&&s.id&&(F=s));var o=t.utils.arrayFirst(e,(function(e){return!(!e.signInName||e.signInName.toLowerCase()!==j.toLowerCase())||!!e.otherHashedAliases&&!!t.utils.arrayFirst(e.otherHashedAliases,(function(e){return B===e}))}));o&&(b=o)}}(r,Y),I.resolve({userList:r,tilesState:i}),s.onDecrementAsyncTileRequestCount())}}function re(e,n){!function(e){if(V){var n=g.getCurrentTime()-T;(new i).Beacon({url:V},{loadTime:n,msaUserCount:e.length})}}(e=e||[]);var t=function(e){return e&&X?[["jsh",encodeURIComponent(e.transientState||"")],["jshp",encodeURIComponent(e.persistentState||"")],["jshs",encodeURIComponent(e.hasStorageAccess||-1)]]:[]}(n);if(W){var o=function(){if(j){if(F&&b)return null;if(F)return F;if(b)return b;if(P)return null}else{if(1===x&&0===C)return _[0];if(1===C&&0===x)return D[0];C+x>1&&a&&s.onRedirect(ee,ne)}return!1}();if(o)return void function(e,n){if(e.idp===h.Aad)le(S.appendOrReplace(O,"sessionid",e.id));else{G&&f.clone(G);var s=S.add(H,n);clearTimeout(null),le(s)}}(o,t);Z?te()&&s.onExecuteGctResult():a?s.onRedirect(ee,ne):te()&&s.onExecuteGctResult()}Z&&(N=!0,s.desktopSsoRunning())||s.onUpdateUserTiles(l.parseMeControlSessions(e),t)}function ie(){w.removeEventListener(m,"message",oe),s.onDecrementAsyncTileRequestCount(),s.onUpdateUserTiles([],[])}function ae(e){if(e){var n={canary:L,client_id:S.extract("client_id"),ctx:$};a||(n.dsso_edge_username=d),s.onRedirect(S.appendCurrentQueryParameterIfNotExist(A),n)}else s.onHandleDssoSuccess()}function ce(){a?s.onHandleDssoFailure():(s.desktopSsoRunning(!1),s.onDesktopSsoFallbackView())}function le(e){document.location.assign(e)}s.onUpdateUserTiles=r.create(),s.onExecuteGctResult=r.create(),s.onHandleDssoSuccess=r.create(),s.onHandleDssoFailure=r.create(),s.onDesktopSsoFallbackView=r.create(),s.onRedirect=r.create(),s.onIncrementAsyncTileRequestCount=r.create(),s.onDecrementAsyncTileRequestCount=r.create(),s.desktopSsoRunning=t.observable(!1),s.callMsaStaticMeControl=t.observable(!1),s.postRedirectUrl=t.observable(),s.isNonInteractiveAuthRequest=a,s.username=d,s.displayName=p,s.unsafe_domainName=R,s.fetchSessionsProgressPaginatedState=k.FetchSessionsProgress,s.sessionPullType=y,s.iFrame_onload=function(e){if(e){var n={messageType:"startStaticMe",sessionState:X?{transientState:Q,persistentState:z}:null},s=v.extractOriginFromUrl(J);e.contentWindow.postMessage(JSON.stringify(n),s)}},s.dispose=function(){clearTimeout(q)},s.desktopSsoRequestControl_onSuccess=function(){E&&U.resolve()},s.desktopSsoRequestControl_onFailure=function(){E&&U.reject()},s.desktopSsoRequestControl_onEdgeRedirect=function(){E&&U.resolve(!0)},n=new c((function(e,n){T=g.getCurrentTime(),s.callMsaStaticMeControl(!0),K&&setTimeout(n,1e4),I={resolve:e}})),K&&(s.onIncrementAsyncTileRequestCount(),w.addEventListener(m,"message",oe),u.throwUnhandledExceptionOnRejection(n.then((function(e){re(e.userList,e.tilesState),N&&E&&E.then(ae,ce)}),ie))),Z&&(A=Z.edgeRedirectUri,Z.startDesktopSsoOnPageLoad&&(R=Z.hintedDomainName),E=new c((function(e,n){U={resolve:e,reject:n}})),K||E.then(ae,ce),setTimeout((function(){var e;(R||se)&&(q=setTimeout(ce,Z.progressAnimationTimeout),(e=R)&&M.toLocaleUpperCase()!==e.toLocaleUpperCase()?(s.desktopSsoRunning()&&s.desktopSsoRunning(!1),M=e,s.desktopSsoRunning(!0)):(s.desktopSsoRunning(!1),s.onDesktopSsoFallbackView()))}),0))}t.components.register("fetch-sessions-control",{viewModel:R,template:s(635),synchronous:!m.ServerData.iMaxStackForKnockoutAsyncComponents||o.Helper.isStackSizeGreaterThan(m.ServerData.iMaxStackForKnockoutAsyncComponents),enableExtensions:!0}),e.exports=R},635:function(e,n,s){e.exports="\x3c!-- "+(s(636),s(14)," --\x3e\n\n\x3c!-- ko if: (sessionPullType & ")+s(0).SessionPullFlags.Msa+') != 0 && callMsaStaticMeControl() --\x3e\n<div data-bind="injectIframe: { url: svr.urlMsaStaticMeControl, onload: iFrame_onload }"></div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: svr.desktopSsoConfig && !isNonInteractiveAuthRequest --\x3e\n<div class="row">\n    <div data-bind="component: { name: \'footer-buttons-field\',\n        params: {\n            serverData: svr,\n            isPrimaryButtonVisible: false,\n            isSecondaryButtonVisible: false } }">\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: (sessionPullType & '+s(0).SessionPullFlags.Dsso+") != 0 && desktopSsoRunning() --\x3e\n<span data-bind=\"component: { name: 'desktop-sso-request-control',\n    params: {\n        serverData: svr,\n        username: username,\n        displayName: displayName,\n        unsafe_domainName: unsafe_domainName },\n    event: {\n        desktopSsoSuccess: desktopSsoRequestControl_onSuccess,\n        desktopSsoFailure: desktopSsoRequestControl_onFailure,\n        desktopSsoEdgeRedirect: desktopSsoRequestControl_onEdgeRedirect } }\">\n</span>\n\x3c!-- /ko --\x3e"},636:function(e,n,s){var t=s(2),o=s(12),r=s(1),i=s(4),a=s(3),c=s(10),l=s(0),u=s(7),d=window,p=r.Helper,m=r.QueryString,S=a.String;function f(e){var n,s=this,r=e.serverData,a=e.unsafe_domainName,f=e.username,g=e.displayName,h=r.urlDssoStatus,v=r.browser,w=r.desktopSsoConfig,k=w.iwaEndpointUrlFormat,R=w.iwaSsoProbeUrlFormat,y=w.iwaIFrameUrlFormat,T=w.iwaRequestTimeoutInMs,C=w.hintedDomainName,x=w.isSafariAllowed,D=w.isIEAllowedForSsoProbe,_=w.isEdgeAnaheimAllowed,P=null,F=0,b=[],I=!1;function E(e){var n={resultCode:e,ssoDelay:F,log:0===e?"":b.join("\n")};(new c).Json({url:h},n)}function U(){var e=new Image;e.onload=A,e.onerror=function(){b.push("Probe image error event fired"),O(2)};var n=R||m.appendOrReplace(k,"probe","1");n=m.appendOrReplace(n,"_",(new Date).getTime()),e.src=n}function A(){P=(new Date).getTime();new c({withCredentials:!0,breakCache:!0,responseType:"text"}).Get({url:k,eventId:u.EventIds.Api_GetIwaSsoToken},l.ContentType.FormUrlEncoded,q,N,L,T)}function M(e){var n,s=S.extractOriginFromUrl(y||k);if(S.extractOriginFromUrl(e.origin)!==s)return b.push("Event origin not valid"),void E(5);try{n=o.parse(e.data)}catch(t){return b.push("Invalid response: "+t),void O(6)}"dssoResult"===n.messageType?(F=n.ssoDelay||0,100===n.resultCode?H(n.message):(b.push("FrameListener: Frame returned code "+n.resultCode+" with message "+n.message),O(n.resultCode))):b.push("FrameListener: messageType was not of the expected value.")}function q(e,n){F=(new Date).getTime()-P,H(n)}function N(){F=(new Date).getTime()-P,b.push("Direct SSO attempt failed"),O(3)}function L(){F=(new Date).getTime()-P,b.push("Direct SSO timed out"),O(3)}function H(e){if(E(0),s.dssoToken(e),!I){s.onDesktopSsoSuccess();var n=document.getElementById("idSIButton9");n&&n.click()}}function O(e){E(e),I||s.onDesktopSsoFailure()}s.onDesktopSsoSuccess=i.create(),s.onDesktopSsoFailure=i.create(),s.onDesktopSsoEdgeRedirect=i.create(),s.useIFrameRequest=t.observable(!1),s.dssoToken=t.observable(),s.unsafe_username=null,s.unsafe_displayName=null,s.iFrameSrc=null,s.dispose=function(){p.removeEventListener(d,"message",M),I=!0},s.iFrame_onload=function(e){if(e){var n=S.extractOriginFromUrl(y||k),s=T+"|"+k;e.contentWindow.postMessage(s,n)}},n=encodeURIComponent(a||C),k=S.format(k,n),R=S.format(R,n),y=S.format(y,n),s.unsafe_username=p.htmlUnescape(f),s.unsafe_displayName=p.htmlUnescape(g),v.Chrome||v.PhantomJS||D&&v.IE&&null!==v.b&&v.b.major>=11||_&&v.Edge&&v.RE_WebKit?U():v.Edge&&w&&w.isEdgeAllowed?"1"===m.extract("is_redirected")?U():s.onDesktopSsoEdgeRedirect():(v._WinPh?(b.push("Detected Browser: WindowsPhone"),0):v.IE&&null!==v.b&&v.b.major>=10?(b.push("Detected Browser: IE10+"),1):v.Firefox?(b.push("Detected Browser: Firefox"),1):v.Safari&&(b.push("Detected Browser: Safari"),x))?(s.iFrameSrc=y||m.appendOrReplace(k,"iframe","1"),s.useIFrameRequest(!0),p.addEventListener(d,"message",M)):(b.push("User agent is not supported"),O(1))}t.components.register("desktop-sso-request-control",{viewModel:f,template:s(637),synchronous:!d.ServerData.iMaxStackForKnockoutAsyncComponents||r.Helper.isStackSizeGreaterThan(d.ServerData.iMaxStackForKnockoutAsyncComponents),enableExtensions:!0}),e.exports=f},637:function(e,n,s){e.exports='<input type="hidden" name="login" data-bind="value: unsafe_username" />\n<input type="hidden" name="loginfmt" data-bind="value: unsafe_displayName" />\n<input type="hidden" name="type" value="'+s(0).PostType.Password+'" />\n<input type="hidden" name="dssoToken" data-bind="value: dssoToken"/>\n\n\x3c!-- ko if: useIFrameRequest --\x3e\n<div data-bind="injectIframe: { url: iFrameSrc, onload: iFrame_onload }"></div>\n\x3c!-- /ko --\x3e'}}]),window.__convergedlogin_pfetchsessionsprogress_12dabd9245715d165757=!0;
//# sourceMappingURL=../12dabd9245715d165757.map